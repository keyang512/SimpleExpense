<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
  <nz-card nzTitle="Expense List" [nzBordered]="false" style="box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-radius: 8px;">
    <div style="display: flex; justify-content: flex-end; margin-bottom: 16px;">
      <button 
        nz-button 
        nzType="default"
        nzShape="round"
        (click)="loadExpenses()" 
        [nzLoading]="loading"
        style="height: 32px; padding: 0 16px;">
        <span nz-icon nzType="reload"></span>
        <span style="margin-left: 8px;">Refresh</span>
      </button>
    </div>

    <div *ngIf="error" style="margin-bottom: 16px;">
      <nz-alert nzType="error" [nzMessage]="error"></nz-alert>
    </div>

    <div *ngIf="loading && expenses.length === 0" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 48px 0;">
      <div style="text-align: center;">
        <span nz-icon nzType="loading" style="font-size: 32px; color: #1890ff; margin-bottom: 16px;"></span>
        <p style="color: #595959; font-size: 16px; margin: 0;">Loading expenses...</p>
      </div>
    </div>

    <div *ngIf="!loading && expenses.length === 0" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 48px 0;">
      <div style="text-align: center;">
        <span nz-icon nzType="inbox" style="font-size: 48px; color: #d9d9d9; margin-bottom: 16px;"></span>
        <h3 style="font-size: 20px; font-weight: 600; color: #595959; margin: 0 0 8px 0;">No expenses found</h3>
        <p style="color: #8c8c8c; margin: 0;">Add your first expense to get started!</p>
      </div>
    </div>

    <div *ngIf="!loading && expenses.length > 0">
      <nz-table 
        #basicTable 
        [nzData]="expenses"
        [nzPageSize]="10"
        [nzShowSizeChanger]="true"
        [nzShowQuickJumper]="true"
        [nzShowTotal]="totalTemplate"
        style="border-radius: 6px;">
        
        <thead>
          <tr style="background-color: #fafafa;">
            <th style="text-align: left; padding: 16px; font-weight: 600; color: #595959;">Description</th>
            <th style="text-align: left; padding: 16px; font-weight: 600; color: #595959;">Amount</th>
            <th style="text-align: left; padding: 16px; font-weight: 600; color: #595959;">Date</th>
            <th style="text-align: left; padding: 16px; font-weight: 600; color: #595959;">Person</th>
            <th style="text-align: left; padding: 16px; font-weight: 600; color: #595959;">Categories</th>
            <th style="text-align: left; padding: 16px; font-weight: 600; color: #595959;">Notes</th>
            <th style="text-align: left; padding: 16px; font-weight: 600; color: #595959;">Actions</th>
          </tr>
        </thead>
        
        <tbody>
          <tr *ngFor="let expense of basicTable.data" style="transition: background-color 0.15s;">
            <td style="padding: 16px;">
              <div style="font-weight: 500; color: #262626;">
                {{ expense.description }}
              </div>
            </td>
            <td style="padding: 16px;">
              <nz-tag 
                [nzColor]="getSeverity(expense.amount)"
                style="border-radius: 12px; padding: 4px 12px; font-weight: 500;">
                {{ formatAmount(expense.amount) }}
              </nz-tag>
            </td>
            <td style="padding: 16px;">
              <div style="display: flex; align-items: center; color: #595959;">
                <span nz-icon nzType="calendar" nzTheme="outline" style="margin-right: 8px; color: #8c8c8c;"></span>
                {{ formatDate(expense.date) }}
              </div>
            </td>
            <td style="padding: 16px;">
              <div style="display: flex; align-items: center; color: #595959;">
                <span nz-icon nzType="user" nzTheme="outline" style="margin-right: 8px; color: #8c8c8c;"></span>
                {{ expense.person.name }}
              </div>
            </td>
            <td style="padding: 16px;">
              <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                <nz-tag 
                  *ngFor="let category of expense.categories" 
                  nzColor="blue"
                  style="border-radius: 12px; padding: 2px 8px; font-size: 12px;">
                  {{ category.name }}
                </nz-tag>
              </div>
            </td>
            <td style="padding: 16px;">
              <div *ngIf="expense.notes; else noNotes" style="max-width: 200px;">
                <span style="color: #595959; font-size: 14px;">{{ expense.notes }}</span>
              </div>
              <ng-template #noNotes>
                <span style="color: #d9d9d9; font-size: 14px;">-</span>
              </ng-template>
            </td>
            <td style="padding: 16px;">
              <div style="display: flex; justify-content: center;">
                <nz-popconfirm
                  nzTitle="Are you sure you want to delete this expense?"
                  nzOkText="Yes"
                  nzCancelText="No"
                  (nzOnConfirm)="deleteExpense(expense.id)">
                  <button 
                    nz-button 
                    nzType="default" 
                    nzDanger
                    nzSize="small"
                    nzShape="circle"
                    style="transition: box-shadow 0.2s;">
                    <span nz-icon nzType="delete" nzTheme="outline"></span>
                  </button>
                </nz-popconfirm>
              </div>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </nz-card>

  <!-- Total Template -->
  <ng-template #totalTemplate let-total>
    Total {{ total }} items
  </ng-template>
</div>
